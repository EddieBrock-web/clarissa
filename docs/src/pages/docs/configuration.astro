---
import Docs from '../../layouts/Docs.astro';
---

<Docs title="Configuration" description="Configure Clarissa with a config file or environment variables">
  <h1>Configuration</h1>
  <p>
    Clarissa can be configured via a config file or environment variables.
    The only required setting is your OpenRouter API key.
  </p>

  <h2>API Key Setup</h2>
  <p>
    Get your API key from <a href="https://openrouter.ai/keys" target="_blank" rel="noopener">OpenRouter</a>.
  </p>

  <h3>Option 1: Interactive Setup (Recommended)</h3>
  <p>Run the setup command:</p>
  <pre><code>clarissa init</code></pre>
  <p>This will prompt for your API key and create the config file automatically.</p>

  <h3>Option 2: Environment Variable</h3>
  <p>Set your API key as an environment variable:</p>
  <pre><code>export OPENROUTER_API_KEY=your_api_key_here</code></pre>
  <p>To make this permanent, add it to your shell configuration file (~/.zshrc or ~/.bashrc).</p>

  <h2>Configuration Options</h2>
  <p>Settings can be specified in the config file or as environment variables. Environment variables take precedence.</p>
  <table>
    <thead>
      <tr>
        <th>Config Key</th>
        <th>Env Variable</th>
        <th>Default</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>apiKey</code></td>
        <td><code>OPENROUTER_API_KEY</code></td>
        <td>(required)</td>
        <td>Your OpenRouter API key</td>
      </tr>
      <tr>
        <td><code>model</code></td>
        <td><code>OPENROUTER_MODEL</code></td>
        <td><code>anthropic/claude-sonnet-4</code></td>
        <td>Default model to use</td>
      </tr>
      <tr>
        <td><code>maxIterations</code></td>
        <td><code>MAX_ITERATIONS</code></td>
        <td><code>10</code></td>
        <td>Maximum tool execution iterations per request</td>
      </tr>
      <tr>
        <td><code>debug</code></td>
        <td><code>DEBUG</code></td>
        <td><code>false</code></td>
        <td>Enable debug logging</td>
      </tr>
    </tbody>
  </table>

  <h3>Example Config File</h3>
  <pre><code set:html={`{
  "apiKey": "sk-or-...",
  "model": "anthropic/claude-sonnet-4",
  "maxIterations": 10,
  "debug": false,
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/path/to/dir"]
    }
  }
}`} /></pre>

  <h3>MCP Servers</h3>
  <p>
    Configure MCP (Model Context Protocol) servers to extend Clarissa with additional tools.
    Servers defined in <code>mcpServers</code> are automatically loaded on startup.
  </p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>command</code></td>
        <td>string</td>
        <td>Command to run the MCP server</td>
      </tr>
      <tr>
        <td><code>args</code></td>
        <td>string[]</td>
        <td>Arguments to pass to the command</td>
      </tr>
      <tr>
        <td><code>env</code></td>
        <td>object</td>
        <td>Environment variables for the server</td>
      </tr>
    </tbody>
  </table>
  <p>Use <code>/mcp</code> to view connected servers and <code>/tools</code> to see available tools.</p>

  <h2>Available Models</h2>
  <p>
    Clarissa supports any model available through OpenRouter. Some popular options include:
  </p>
  <ul>
    <li><code>anthropic/claude-sonnet-4</code> - Claude Sonnet 4 (default)</li>
    <li><code>anthropic/claude-opus-4</code> - Claude Opus 4</li>
    <li><code>openai/gpt-4o</code> - GPT-4o</li>
    <li><code>google/gemini-2.0-flash-001</code> - Gemini 2.0 Flash</li>
    <li><code>meta-llama/llama-3.3-70b-instruct</code> - Llama 3.3 70B</li>
    <li><code>deepseek/deepseek-chat</code> - DeepSeek Chat</li>
  </ul>
  <p>
    You can switch models at runtime using the <code>/model</code> command.
    See the full list at <a href="https://openrouter.ai/models" target="_blank" rel="noopener">OpenRouter Models</a>.
  </p>

  <h2>CLI Options</h2>
  <p>Clarissa accepts command-line arguments for one-shot mode and configuration:</p>
  <table>
    <thead>
      <tr>
        <th>Option</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>-c, --continue</code></td>
        <td>Continue the last session</td>
      </tr>
      <tr>
        <td><code>-m, --model MODEL</code></td>
        <td>Use a specific model for this session</td>
      </tr>
      <tr>
        <td><code>--list-models</code></td>
        <td>List available models and exit</td>
      </tr>
      <tr>
        <td><code>--check-update</code></td>
        <td>Check for available updates</td>
      </tr>
      <tr>
        <td><code>--debug</code></td>
        <td>Enable debug output</td>
      </tr>
      <tr>
        <td><code>-h, --help</code></td>
        <td>Show help message</td>
      </tr>
      <tr>
        <td><code>-v, --version</code></td>
        <td>Show version number</td>
      </tr>
    </tbody>
  </table>

  <h2>CLI Commands</h2>
  <p>Clarissa also provides standalone commands:</p>
  <table>
    <thead>
      <tr>
        <th>Command</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>clarissa init</code></td>
        <td>Set up Clarissa with your API key</td>
      </tr>
      <tr>
        <td><code>clarissa upgrade</code></td>
        <td>Upgrade to the latest version</td>
      </tr>
      <tr>
        <td><code>clarissa config</code></td>
        <td>View current configuration</td>
      </tr>
      <tr>
        <td><code>clarissa history</code></td>
        <td>Show one-shot query history</td>
      </tr>
    </tbody>
  </table>

  <h2>Data Storage</h2>
  <p>Clarissa stores data in your home directory at <code>~/.clarissa/</code>:</p>
  <table>
    <thead>
      <tr>
        <th>Path</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>~/.clarissa/config.json</code></td>
        <td>Configuration file (API key, model, etc.)</td>
      </tr>
      <tr>
        <td><code>~/.clarissa/sessions/</code></td>
        <td>Saved conversation sessions (JSON files)</td>
      </tr>
      <tr>
        <td><code>~/.clarissa/memories.json</code></td>
        <td>Persistent memories across sessions</td>
      </tr>
      <tr>
        <td><code>~/.clarissa/history.json</code></td>
        <td>One-shot query history</td>
      </tr>
      <tr>
        <td><code>~/.clarissa/update-check.json</code></td>
        <td>Update check cache (24-hour interval)</td>
      </tr>
    </tbody>
  </table>

  <h2>Debug Mode</h2>
  <p>Enable debug mode to see detailed logging of API calls and tool executions:</p>
  <pre><code>DEBUG=true clarissa</code></pre>
  <p>Or use the CLI flag:</p>
  <pre><code>clarissa --debug</code></pre>

  <h2>Next Steps</h2>
  <p>
    Now that you're configured, learn about the <a href="../tools/">built-in tools</a>
    or jump straight to <a href="../usage/">using Clarissa</a>.
  </p>
</Docs>

